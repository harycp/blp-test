<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Edit Book</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
      crossorigin="anonymous"
    />
  </head>
  <body class="container">
    <h1>Edit Book</h1>

    <form action="/books/<%= book._id %>?_method=PUT" method="POST" enctype="multipart/form-data">
      <div class="mb-3">
        <label class="form-label" for="title">Title of Book</label>
        <input class="form-control" type="text" name="title" id="title" value="<%= book.title %>" required />
      </div>

      <div class="mb-3">
        <label class="form-label" for="author">Author</label>
        <input class="form-control" type="text" name="author" id="author" value="<%= book.author %>" required />
      </div>

      <div class="mb-3">
        <label class="form-label" for="pages">Pages</label>
        <input class="form-control" type="number" name="pages" id="pages" value="<%= book.pages %>" required />
      </div>

      <div class="mb-3">
        <label class="form-label" for="genre">Genre</label>
        <select class="form-select" name="genre" id="genre">
          <option value="fiction" <%= book.genre == "fiction" ? "selected" : "" %>>Fiction</option>
          <option value="non-fiction" <%= book.genre == "non-fiction" ? "selected" : "" %>>Non-fiction</option>
          <option value="thriller" <%= book.genre == "thriller" ? "selected" : "" %>>Thriller</option>
          <option value="romance" <%= book.genre == "romance" ? "selected" : "" %>>Romance</option>
          <option value="history" <%= book.genre == "history" ? "selected" : "" %>>History</option>
          <option value="philosophy" <%= book.genre == "philosophy" ? "selected" : "" %>>Philosophy</option>
        </select>
      </div>

      <div class="mb-3">
        <label class="form-label" for="year">Year</label>
        <input class="form-control" type="number" name="year" id="year" value="<%= book.year %>" required />
      </div>

      <div class="mb-3">
        <label class="form-label" for="language">Language</label>
        <input class="form-control" type="text" name="language" id="language" value="<%= book.language %>" required />
      </div>

      <!-- Display Existing Image (if available) -->
    <div class="mb-3">
      <label class="form-label" for="image">Book Image</label>
      <% if (blobContent) { %>
        <div>
          <img src="data:<%= blobContent.mimeType %>;base64,<%= blobContent.content %>" alt="Book Image" class="img-fluid" style="max-width: 200px; height: auto;" />
          <p>Current image</p>
        </div>
      <% } %>
      <input class="form-control" type="file" name="image" id="image" />
      <small>Leave blank if you don't want to change the image.</small>
    </div>


      <button class="btn btn-outline-success mb-4" type="submit">Submit</button>
    </form>

    <a href="/books"
      ><i class="fa fa-arrow-left" style="font-size: 24px; color: black"></i
    ></a>

    <script
      src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"
      integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.min.js"
      integrity="sha384-0pUGZvbkm6XF6gxjEnlmuGrJXVbNuzT9qBBavbLwCsOGabYfZo0T0to5eqruptLy"
      crossorigin="anonymous"
    ></script>
  </body>
</html>
